Version 4
SHEET 1 1916 848
WIRE 944 -320 880 -320
WIRE 1760 -320 1392 -320
WIRE 944 -256 944 -320
WIRE 1392 -256 1392 -320
WIRE 1760 -256 1760 -320
WIRE -160 -128 -288 -128
WIRE 48 -128 -160 -128
WIRE 320 -128 48 -128
WIRE 400 -128 320 -128
WIRE 1760 -128 1760 -176
WIRE 944 -112 944 -176
WIRE 1392 -112 1392 -176
WIRE -288 -80 -288 -128
WIRE 48 -64 48 -128
WIRE 112 -64 48 -64
WIRE 112 -48 112 -64
WIRE 320 -48 320 -128
WIRE 48 -32 48 -64
WIRE 1760 0 1760 -48
WIRE -288 32 -288 -16
WIRE 944 32 944 -32
WIRE -160 48 -160 -128
WIRE 48 64 48 32
WIRE 112 64 112 32
WIRE 112 64 48 64
WIRE 320 96 320 16
WIRE 320 96 176 96
WIRE 400 96 320 96
WIRE 1760 128 1760 80
WIRE 176 160 176 96
WIRE 944 160 944 112
WIRE -160 176 -160 128
WIRE -80 176 -160 176
WIRE 48 176 48 64
WIRE 48 176 -16 176
WIRE 96 176 48 176
WIRE 320 192 320 96
WIRE -160 240 -160 176
WIRE 48 240 48 176
WIRE 96 240 96 176
WIRE 128 240 96 240
WIRE 944 288 944 240
WIRE 944 288 880 288
WIRE -288 368 -288 112
WIRE -160 368 -160 304
WIRE -160 368 -288 368
WIRE 48 368 48 304
WIRE 48 368 -160 368
WIRE 176 368 176 256
WIRE 176 368 48 368
WIRE 320 368 320 272
WIRE 320 368 176 368
WIRE -288 400 -288 368
FLAG -288 400 0
FLAG 880 -320 Motor_+ve
FLAG 880 288 Motor_-ve
FLAG 1392 -112 0
FLAG 1760 128 0
FLAG 400 -128 Motor_+ve
FLAG 400 96 Motor_-ve
SYMBOL res 96 -64 R0
SYMATTR InstName R2
SYMATTR Value 2.2e6
SYMBOL voltage -288 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -531 56 Left 2
SYMATTR Value PULSE(0 17 1 0.005 0.005 150 500 1)
SYMATTR InstName V1
SYMBOL cap 64 304 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value 330e-6
SYMATTR SpiceLine IC=0
SYMBOL nmos 128 160 R0
WINDOW 0 63 28 Left 2
WINDOW 3 62 0 Left 2
SYMATTR InstName M1
SYMATTR Value STP16NF06
SYMATTR Prefix X
SYMBOL ind 928 -272 R0
SYMATTR InstName L1
SYMATTR Value 1m
SYMBOL diode 336 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -91 31 Left 2
SYMATTR InstName D1
SYMATTR Value uf5406
SYMBOL diode 64 32 R180
WINDOW 0 24 64 Left 2
WINDOW 3 34 29 Left 2
SYMATTR InstName D2
SYMATTR Value uf5406
SYMBOL ind 1744 -272 R0
SYMATTR InstName Inertia
SYMATTR Value 5m
SYMBOL res 1744 -144 R0
SYMATTR InstName RLoss
SYMATTR Value 4m
SYMBOL voltage 1760 -16 R0
SYMATTR InstName VSense_2
SYMATTR Value 0
SYMBOL bv 944 16 R0
SYMATTR InstName B1
SYMATTR Value V=I(VSense_2)*K_emf
SYMBOL bv 1392 -272 R0
SYMATTR InstName Torque
SYMATTR Value V=I(VSense_1)*K_t
SYMBOL voltage 944 144 R0
SYMATTR InstName VSense_1
SYMATTR Value 0
SYMBOL res 928 -128 R0
SYMATTR InstName R3
SYMATTR Value 2.8333
SYMBOL Misc\\xvaristor 336 288 R180
WINDOW 0 -60 71 Left 2
WINDOW 3 -116 32 Left 2
SYMATTR InstName NTC
SYMATTR Value S236_50
SYMBOL diode -272 -16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value IdealDiode
SYMBOL res -176 32 R0
SYMATTR InstName R1
SYMATTR Value 2.2e3
SYMBOL zener -144 304 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value NZX3V9C
SYMATTR Prefix X
SYMBOL zener -80 192 R270
WINDOW 0 36 32 VTop 2
WINDOW 3 -4 32 VBottom 2
SYMATTR InstName D5
SYMATTR Value NZX5V6C
SYMATTR Prefix X
TEXT -744 576 Left 2 !.lib stp16nf06.lib
TEXT -744 544 Left 2 !.tran 160
TEXT -744 608 Left 2 !.model uf5406 d(is = 1.15563E-005 n = 3.45 rs = 0.0887337 eg = 1.11 xti = 3 cjo = 9.14327E-011 vj = 0.298558 m = 0.347605 fc = 0.5  tt = 1.57227E-007 bv = 660 ibv = 0.3 af = 1 kf = 0)
TEXT 1392 -416 Left 2 !.param K_t=150u
TEXT 800 -416 Left 2 !.param K_emf=900
TEXT -744 640 Left 2 !.lib ntc_20130313.lib
TEXT -744 736 Left 2 !.model IdealDiode D(Vfwd=1m Ron=1m Roff=1G epsilon=1m revepsilon=1m)
TEXT -744 704 Left 2 !.inc NZX5V6C.prm
TEXT -744 672 Left 2 !.inc NZX3V9C.prm
